# TAO Converter

> TAO Converter download link: [https://catalog.ngc.nvidia.com/orgs/nvidia/teams/tao/resources/tao-converter](https://catalog.ngc.nvidia.com/orgs/nvidia/teams/tao/resources/tao-converter)
>
> Related documentation: [https://docs.nvidia.com/tao/tao-toolkit/text/tao-converter/index.html#tao-converter-matrix](https://docs.nvidia.com/tao/tao-toolkit/text/tao-converter/index.html#tao-converter-matrix)

## Installing the TAO Converter

The **TAO Converter** parses the exported `.etlt` model file, and generates an optimized TensorRT engine. These engines can be generated to support inference at low precision, such as `FP16` or `INT8`.

While most of the TAO models support direct integration of the .etlt files to DeepStream 6.1, DeepStream can also consume the optimized engine generated by the `tao-converter`.

The TensorRT engines generated by this `tao-converter` are specific to the GPU that it was generated on. So, based on the platform that the model is being deployed to, you will need to download the specific version of the `tao-converter` and generate the engine there.

The TAO models from TAO 3.0-22.05 have been verified to integrate with TensorRT version 7.0, 7.1, 7.2, 8.0, 8.2 and 8.4.

| **TensorRT** | **Platform** |
| ------------ | ------------ |
| 7.2          | x86          |
| 7.1          | x86          |
| 8.0          | x86          |
| 8.2          | x86          |
| 8.4          | x86          |
| 8.0          | aarch64      |
| 8.2          | aarch64      |
| 8.4          | aarch64      |

## Running the TAO converter

```sh
    tao-converter [-h] -k <encryption_key>
                       -d <input_dimensions>
                       -o <comma separated output nodes>
                       [-c <path to calibration cache file>]
                       [-e <path to output engine>]
                       [-b <calibration batch size>]
                       [-m <maximum batch size of the TRT engine>]
                       [-t <engine datatype>]
                       [-w <maximum workspace size of the TRT Engine>]
                       [-i <input dimension ordering>]
                       [-p <optimization_profiles>]
                       [-s]
                       [-u <DLA_core>]
                       input_file
```

### Required Arguments

- `input_file`: Path to the `.etlt` model exported using `tao <model> export`.
- `-k`: The key used to encode the `.tlt` model when doing the training.
- `-d`: Comma-separated list of input dimensions that should match the dimensions used for `tao <model> export`.
- `-o`: Comma-separated list of output blob names that should match the output configuration used for `tao <model> export`.

### Optional Arguments

- `-e`: Path to save the engine to. (default: `./saved.engine`)
- `-t`: Desired engine data type, generates calibration cache if in INT8 mode. The default value is `fp32`. The options are {`fp32`, `fp16`, `int8`}.
- `-w`: Maximum workspace size for the TensorRT engine. The default value is `1073741824(1<<30)`.
- `-i`: Input dimension ordering, all other TAO commands use NCHW. The default value is `nchw`. The options are {`nchw`, `nhwc`, `nc`}.
- `-p`: Optimization profiles for `.etlt` models with dynamic shape. Comma separated list of optimization profile shapes in the format `<input_name>,<min_shape>,<opt_shape>,<max_shape>`, where each shape has the format: `<n>x<c>x<h>x<w>`. Can be specified multiple times if there are multiple input tensors for the model. This is only useful for new models introduced in TAO Toolkit 3.21.08. This parameter is not required for models that are already existed in TAO Toolkit 2.0.
- `-s`: TensorRT strict type constraints. A Boolean to apply TensorRT strict type constraints when building the TensorRT engine.
- `-u`: Use DLA core. Specifying DLA core index when building the TensorRT engine on Jetson devices.

### INT8 Mode Arguments

- `-c`: Path to calibration cache file, only used in INT8 mode. The default value is `./cal.bin`.
- `-b`: Batch size used during the export step for INT8 calibration cache generation. (default: `8`).
- `-m`: Maximum batch size for TensorRT engine.(default: `16`). If meet with out-of-memory issue, decrease the batch size accordingly. This parameter is not required for `.etlt` models generated with dynamic shape. (This is only possible for new models introduced in TAO Toolkit 3.21.08.)

The usage for each TAO Computer Vision is explained in the respective models chapter.